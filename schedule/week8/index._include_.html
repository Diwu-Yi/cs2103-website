<panel header=":trophy: Outcomes" expandable="" ctrl-lvl="1" no-close="">
  <div>
    <div>
      <panel type="warning" header=":trophy: Can explain architectural styles :star::star:" expandable="" expanded="" no-close="">
        <panel type="info" header=":trophy: Can identify n-tier architectural style :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Architecture →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="what-one">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>The main characteristic of an n-tier architectural style is that higher layers make use of services provided by lower layers. Lower layers are independent of higher layers. Operating systems and network communication software often use
                  this style.</p><img src="/website/book/architecture/architecturalStyles/nTier/what/images/nTier.png" height="150">
                <p></p>
              </div>
              <div></div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="info" header=":trophy: Can identify client-server architectural style :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Architecture →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="what-one-2">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>This is an architectural style for distributed applications. The main characteristic of the client-server style is the presence of at least one component playing the role of a server, with at least one client component accessing the services
                  of the server.</p><img src="/website/book/architecture/architecturalStyles/clientServer/what/images/clientServer.png" height="250">
                <p></p>
              </div>
              <div></div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="success" header=":trophy: Can identify transaction processing architectural style :star::star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Architecture →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="what-one-3">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>The main characteristic of a transaction processing architecture style is that the workload of the system is broken down to a number of <em>transactions</em>. These transactions are then given to a “dispatcher” that controls the execution
                  of each transaction. Task queuing, ordering, “undo” etc. are handled by the dispatcher.</p><img src="/website/book/architecture/architecturalStyles/transactionProcessing/what/images/transactionProcessing.png" height="250">
                <p></p>
              </div>
              <div></div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="success" header=":trophy: Can identify service-oriented architectural style :star::star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Architecture →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="what-one-4">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>The <em>service-oriented architecture</em> (SOA) is a relatively recent architectural style for distributed applications. An SOA is essentially an application built by combining functionalities packaged as <strong>programmatically accessible services</strong>.
                  A prerequisite for SOA is the interoperability between distributed services, which may not even be implemented using the same programming language. A common way to implement SOAs is through the use of <em>XML web services</em> where
                  the web is used as the medium for the services to interact, and XML is used as the language of communication between service providers and service users.</p>
                <tip-box>
                  <p>Example:</p>
                  <p>Suppose that <a href="http://Amazon.com">Amazon.com</a> provides a web service for customers to browse and buy merchandize, while HSBC provides a web service for merchants to charge HSBC credit cards. Using these web services, an ‘eBookShop’
                    web application can be developed that allows HSBC customers to buy merchandize from Amazon and pay for them using HSBC credit cards. Since both Amazon and HSBC services follow the SOA architecture, their web services can be reused
                    by the web application, even if all three systems use different programming platforms.</p><img src="/website/book/architecture/architecturalStyles/serviceOriented/what/images/amazonWebServices.png" height="280">
                  <p></p>
                </tip-box>
              </div>
              <div></div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="info" header=":trophy: Can identify event-driven architectural style :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Architecture →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="what-one-5">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>An event is a notable occurrence that happens inside or outside the software, such as the user clicking a button, a timer running out, minimizing a window, etc. In the event-driven architectural style, events are detected and communicated
                  to the affected components. These components then react to the events, if required. For example, when the ‘button clicked’ event occurs, functions that are tied to the button-click event is activated. This architectural style is often
                  used in GUIs.</p>
              </div>
              <div></div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="success" header=":trophy: Can name several other architecture styles :star::star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Architecture →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="more-styles-two">More Styles <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>Other well-known architectural styles include the <em>pipes-and-filters architectures</em>, the <em>broker architectures</em>, the <em>peer-to-peer architectures</em>, and the <em>message-oriented architectures</em>.</p>
              </div>
              <div></div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="info" header=":trophy: Can explain how architectural styles are combined :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Architecture →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="using-styles-two">Using Styles <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>Most applications use a mix of these architectural styles or adopt a style that is customized to the requirements. For example, an application can use a client-server architecture where the server component comprises several layers, i.e.
                  it uses the multi-layer architecture.</p>
              </div>
              <div>
                <div>
                  <panel header=":muscle: Exercises" expandable="">
                    <div>
                      <panel header="Q: Comment on how each of the following architectural styles (these architectural styles are patterns too) could be potentially useful when designing the architecture for Minesweeper.">
                        <question has-input="true">
                          <p>Assume you are designing a multiplayer version of the Minesweeper game where any number of players can play the same Minefield. Players use their own PCs to play the game. A player scores by deducing a cell correctly before any
                            of the other players do. Once a cell is correctly deduced, it appears as either marked or cleared for all players. Comment on how each of the following architectural styles (these architectural styles are patterns too) could
                            be potentially useful when designing the architecture for this game.</p>
                          <ol>
                            <li>Client-server</li>
                            <li>Transaction-processing</li>
                            <li>MVC</li>
                            <li>SOA (Service Oriented Architecture)</li>
                            <li>multi-layer (n-tier)</li>
                          </ol>
                          <div slot="answer">
                            <ol>
                              <li>Client-server – Clients can be the game UI running on player PCs. The server can be the game logic running on one machine.</li>
                              <li>Transaction-processing – Each player action can be packaged as transactions (by the client component running on the player PC) and sent to the server. Server processes them in the order they are received.</li>
                              <li>MVC – Game UI (running on player machines) can have the view and the controller part while the server can be considered as the model.</li>
                              <li>SOA – The game can access a remote web services for things such as getting new puzzles, validating puzzles, charging players subscription fees, etc.</li>
                              <li>Multi-layer – The server component can have two layers: logic layer and the storage layer.</li>
                            </ol><img src="/website/book/architecture/architecturalStyles/more/usingStyles/images/architectureExample.png" height="300">
                            <p></p>
                          </div>
                        </question>
                      </panel>
                    </div>
                  </panel>
                </div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="info" header=":trophy: Can explain how architectural styles are combined :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Architecture →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="drawing-two">Drawing <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>{add more}</p>
                <tip-box type="info">
                  <p>Tip: Avoid the indiscriminate use of double-headed arrows to show interactions between components.</p><img src="/website/book/architecture/architectureDiagrams/drawing/images/tip.png" height="190">
                  <p></p>
                  <p>Consider the two architecture diagrams of the same software. Because <code>Diagram 2</code> uses double headed arrows, the important fact that GUI has a bi-directional dependency with the Logic component is no longer captured.</p>
                </tip-box>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
      </panel>
    </div>
    <div>
      <panel type="warning" header=":trophy: Can explain integration approaches :star::star:" expandable="" expanded="" no-close="">
        <panel type="warning" header=":trophy: Can explain integration :star::star:" expandable="">
          <div>
            <div></div>
            <p></p>
            <p><span class="dimmed"><strong><span>Implementation → Integration → Introduction →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="what-one-6">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p><strong>Combining parts of a software product to form a whole is called <em>integration</em></strong>. It is also one of the most troublesome tasks and it rarely goes smoothly.</p>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="warning" header=":trophy: Can explain how integration approaches vary based on timing and frequency :star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Implementation → Integration →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="late-and-one-time-vs-early-and-frequent-two">'Late and One Time' vs 'Early and Frequent' <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>In terms of timing and frequency, there are two general approaches to integration:</p>
                <ol>
                  <li><em>Late and one-time</em>: In an extreme case of this approach, developers wait till all components are completed and integrate all finished components just before the release. This approach is not recommended because integration often
                    causes many component incompatibilities (due to previous miscommunications and misunderstandings) to surface which can lead to delivery delays: Late integration → incompatibilities found → major rework required → cannot meet the delivery
                    date.</li>
                  <li><em>Early and frequent</em>: The other approach is to integrate early and evolve in parallel in small steps, re-integrating frequently. For example, a working skeleton can be written first (i.e. it compiles and runs but does not produce
                    any useful output). This can be done by one developer, possibly the one in charge of integration. After that, all developers can flesh out the skeleton in parallel, adding one feature at a time. After each feature is done, simply integrate
                    the new code to the main system.</li>
                </ol>
                <p>Whether using frequent integration or one-time late integration, there is still a need to decide the order in which components are to be integrated. There are several approaches to doing this, as explained next.</p>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="info" header=":trophy: Can explain how integration approaches vary based on amount merged at a time :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Implementation → Integration →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="big-bang-vs-incremental-integration-two">Big-Bang vs Incremental Integration <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>In the <em>big-bang integration</em> approach, all components are integrated at the same time. This approach is not recommended because it will uncover too many problems at the same time which could make debugging and bug-fixing more complex
                  than when problems are uncovered incrementally.</p>
              </div>
              <div>
                <div>
                  <panel header=":muscle: Exercises" expandable="">
                    <div>
                      <panel header="Q: Give two arguments in support and two arguments against the following statement.">
                        <question has-input="true">
                          <p>Give two arguments in support and two arguments against the following statement.</p>
                          <p><em>Because there is no external client, it is OK to use big bang integration for a school project.</em></p>
                          <div slot="answer">
                            <p>Arguments for:</p>
                            <ul>
                              <li>It is relatively simple; even big-bang can succeed.</li>
                              <li>Project duration is short; there is not enough time to integrate in steps.</li>
                              <li>The system is non-critical, non-production (demo only); the cost of integration issues is relatively small.</li>
                            </ul>
                            <p>Arguments against:</p>
                            <ul>
                              <li>Inexperienced developers; big-bang more likely to fail</li>
                              <li>Too many problems may be discovered too late. Submission deadline (fixed) can be missed.</li>
                              <li>Team members have not worked together before; increases the probability of integration problems.</li>
                            </ul>
                          </div>
                        </question>
                      </panel>
                    </div>
                  </panel>
                </div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="info" header=":trophy: Can explain how integration approaches vary based on top-down or bottom-up integration :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Implementation → Integration →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="top-down-vs-bottom-up-integration-three">Top-Down vs Bottom-Up Integration <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>For incremental integration efforts, the following three incremental integration approaches are more suitable.</p><img src="/website/book/integration/approaches/topDownVsBottomUp/images/approaches.png" height="100">
                <p></p>
                <ul>
                  <li><em>Top-down</em> integration: In top-down integration, higher-level components are integrated before bringing in the lower-level components. One advantage of this approach is that higher-level problems can be discovered early. One disadvantage
                    is that this requires the use of dummy or skeletal components (i.e. stubs) in place of lower level components until the real lower-level components are integrated to the system. Otherwise, higher-level components cannot function as
                    they depend on lower level ones.</li>
                  <li><em>Bottom-up</em> integration: This is the reverse of top-down integration. Advantages and disadvantages are simply the reverse of those of the top-down approach.</li>
                  <li><em>Sandwich</em> integration: This is a mix of the top-down and the bottom-up approaches. The idea is to do both top-down and bottom-up so as to “meet up” in the middle.</li>
                </ul>
              </div>
              <div>
                <div>
                  <panel header=":muscle: Exercises" expandable="">
                    <div>
                      <panel header="Q: Suggest an integration strategy for the system represented by following diagram.">
                        <question has-input="true">
                          <p>Suggest an integration strategy for the system represented by following diagram. You need not follow a strict top-down, bottom-up, sandwich, or big bang approach. Dashed arrows represent dependencies between classes.</p>
                          <p>Also take into account the following facts in your test strategy.</p>
                          <ul>
                            <li><strong>HospitalUI</strong> will be developed early, so as to get customer feedback early.</li>
                            <li><strong>HospitalFacade</strong> shields the UI from complexities of the application layer. It simply redirects the method calls received to the appropriate classes below</li>
                            <li><strong>IO_Helper</strong> is to be reused from an earlier project, with minor modifications</li>
                            <li>Development of <strong>OutPatient</strong> component has been outsourced, and the delivery is not expected until the 2nd half of the project.</li>
                          </ul><img src="/website/book/integration/approaches/topDownVsBottomUp/images/hospital.png" height="250">
                          <p></p>
                          <div slot="answer">
                            <p>There can be many acceptable answers to this question. But any good strategy should consider at least some of the below.</p>
                            <ul>
                              <li>Since <strong>HospitalUI</strong> will be developed early, it’s OK to integrate it early, using stubs, rather than wait for the rest of the system to finish. (i.e. a top-down integration is suitable for <strong>HospitalUI</strong>)</li>
                              <li>Because <strong>HospitalFacade</strong> is unlikely to have a lot of business logic, it may not be worth to write stubs to test it (i.e. a bottom-up integration is better for <strong>HospitalFacade</strong>).</li>
                              <li>Since <strong>IO_Helper</strong> is to be reused from an earlier project, we can finish it early. This is especially suitable since there are many classes that use it. Therefore <strong>IO_Helper</strong> can be integrated
                                with the dependent classes in bottom-up fashion.</li>
                              <li>Since <strong>OutPatient</strong> class may be delayed, we may have to integrate <strong>PatientMgr</strong> using a stub.</li>
                              <li><strong>TypeA</strong>, <strong>TypeB</strong>, and <strong>TypeC</strong> seem to be tightly coupled. It may be a good idea to test them together.</li>
                            </ul>
                            <p>Given below is one possible integration test strategy. Relative positioning also indicates a rough timeline.</p><img src="/website/book/integration/approaches/topDownVsBottomUp/images/hospitalIntegration.png" height="250">
                            <p></p>
                          </div>
                        </question>
                      </panel>
                    </div>
                    <div>
                      <panel header="Q: Describe the order in which components will be integrated with one another if the following integration strategies were adopted.">
                        <question has-input="false">
                          <p>Consider the architecture given below. Describe the order in which components will be integrated with one another if the following integration strategies were adopted.</p>
                          <p>a) top-down b) bottom-up c) sandwich</p>
                          <p>Note that dashed arrows show dependencies (e.g. A depend on B, C, D and therefore, higher-level than B, C and D).</p><img src="/website/book/integration/approaches/topDownVsBottomUp/images/abc.png" height="190">
                          <p></p>
                          <div slot="answer">
                            <p>a) Diagram:</p><img src="/website/book/integration/approaches/topDownVsBottomUp/images/aAnswer.png" height="230">
                            <p></p>
                            <p>b) Diagram:</p><img src="/website/book/integration/approaches/topDownVsBottomUp/images/bAnswer.png" height="230">
                            <p></p>
                            <p>c) Diagram:</p><img src="/website/book/integration/approaches/topDownVsBottomUp/images/cAnswer.png" height="230">
                            <p></p>
                          </div>
                        </question>
                      </panel>
                    </div>
                  </panel>
                </div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
      </panel>
    </div>
    <div>
      <panel type="info" header=":trophy: Can use defensive programming :star::star::star:" expandable="" expanded="" no-close="">
        <panel type="info" header=":trophy: Can explain defensive programming :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Implementation → Error Handling →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="what-one-7">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>A defensive programmer codes under the assumption “if we leave room for things to go wrong, they <em>will</em> go wrong”. Therefore, a defensive programmer proactively tries to eliminate any room for things to go wrong.</p>
                <tip-box>
                  <p>Example:</p>
                  <p>{Defensive copying}</p>
                </tip-box>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="info" header=":trophy: Can use defensive coding to enforce compulsory associations :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Implementation → Error Handling →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="enforcing-compulsory-associations-two">Enforcing Compulsory Associations <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>Consider two classes, Account and Guarantor, with an association as shown in the following diagram:</p>
                <tip-box>
                  <p>Example:</p><img src="/website/book/errorHandling/defensiveProgramming/compulsoryAssociations/images/accountGuarantor.png" height="50">
                  <p></p>
                  <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Account</span> </span>{
    Guarantor guarantor;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setGuarantor</span><span class="hljs-params">(Guarantor g)</span> </span>{
        guarantor = g;
    }
}
</code></pre>
                  <p>Here, the association is compulsory i.e. an <code>Account</code> object should always be linked to a <code>Guarantor</code>. One way to implement this is to simply use a reference variable as above. However, what if someone else in the
                    team used the <code>Account</code> class as:</p>
                  <pre><code class="hljs java">Account a = <span class="hljs-keyword">new</span> Account();
a.setGuarantor(<span class="hljs-keyword">null</span>);
</code></pre>
                  <p>This results in an <code>Account</code> without a <code>Guarantor</code>! In a real banking system, this could have serious consequences! The code here did not try to prevent such a thing from happening. To proactively enforce the multiplicity
                    constraint, a solution is offered as follows:</p>
                  <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Account</span> </span>{
    <span class="hljs-keyword">private</span> Guarantor guarantor;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Account</span><span class="hljs-params">(Guarantor g)</span></span>{
        <span class="hljs-keyword">if</span> (g == <span class="hljs-keyword">null</span>) stopSystemWithMessage(“multiplicity violated. Null Guarantor ”);
        guarantor = g;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">setGuarantor</span> <span class="hljs-params">(Guarantor m)</span></span>{
        <span class="hljs-keyword">if</span> (g == <span class="hljs-keyword">null</span>) stopSystemWithMessage(“multiplicity violated. Null Guarantor”);
        guarantor = g;
    }
    …
}
</code></pre>
                  <p>In the class Account, <code>guarantor</code> has to be declared as a private variable to prevent the value from being changed from outside the class.</p>
                </tip-box>
              </div>
              <div>
                <div>
                  <panel header=":muscle: Exercises" expandable="">
                    <div>
                      <panel header=":lock::key: For the Manager class, write an addAccount() method.">
                        <question has-input="true">
                          <p>For the Manager class shown below, write an addAccount() method that</p>
                          <ul>
                            <li>restricts the maximum number of Accounts to 8</li>
                            <li>avoids adding duplicate Accounts</li>
                          </ul><img src="/website/book/errorHandling/defensiveProgramming/compulsoryAssociations/images/managerAccount.jpg" height="55">
                          <p></p>
                          <div slot="answer">
                            <pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Manager</span> </span>{
    <span class="hljs-keyword">private</span> ArrayList&lt; Account &gt; theAccounts ;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addAccount</span><span class="hljs-params">(Account acc)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">if</span> (theAccounts.size( ) == <span class="hljs-number">8</span>)
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception (<span class="hljs-string">"adding more than 8 accounts"</span>);

        <span class="hljs-keyword">if</span> (!theAccounts.contains(acc)) {
            theAccounts.add(acc) ;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">removeAccount</span><span class="hljs-params">(Account acc)</span> </span>{
        theAccounts.remove(acc) ;
    }
} <span class="hljs-comment">//end class</span>
</code></pre>
                          </div>
                        </question>
                      </panel>
                    </div>
                    <div>
                      <panel header=":lock::key: Implement the classes below using the defensive coding approach.">
                        <question has-input="true">
                          <p>Implement the classes with appropriate references and operations to establish the association among the classes. Follow the defensive coding approach. Let the Marriage class handle setting/removal of reference.</p><img src="/website/book/errorHandling/defensiveProgramming/compulsoryAssociations/images/manMarriageWoman.jpg"
                            height="55">
                          <p></p>
                          <div slot="answer">
                            <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Marriage</span> </span>{
    <span class="hljs-keyword">private</span> Man husband = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> Woman wife = <span class="hljs-keyword">null</span>;

    <span class="hljs-comment">// extra information like date etc can be added</span>

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Marriage</span><span class="hljs-params">(Man m, Woman w)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">if</span> (m == <span class="hljs-keyword">null</span> || w == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"no man/woman"</span>);
        }
        <span class="hljs-keyword">if</span> (m.isMarried() || w.isMarried()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"already married"</span>);
        }
        husband = m;
        m.enterMarriage(<span class="hljs-keyword">this</span>);
        wife = w;
        w.enterMarriage(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> Man <span class="hljs-title">getHusband</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">if</span>(husband == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(“error state”);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> husband;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> Woman <span class="hljs-title">getWife</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">if</span>(wife == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(“error state”);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> wife;
        }
    }

    <span class="hljs-comment">// removal of both ends of 'Marriage'</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">divorce</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">if</span> (husband==<span class="hljs-keyword">null</span> || wife==<span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(“no marriage”);
        }
        husband.removeFromMarriage(<span class="hljs-keyword">this</span>);
        husband = <span class="hljs-keyword">null</span>;
        wife.removeFromMarriage(<span class="hljs-keyword">this</span>);
        wife = <span class="hljs-keyword">null</span>;
    }
} <span class="hljs-comment">// end class</span>
</code></pre>
                          </div>
                        </question>
                      </panel>
                    </div>
                    <div>
                      <panel header=":lock::key: Give a suitable defensive implementation to the Account class.">
                        <question has-input="true">
                          <p>Give a suitable defensive implementation to the Account class in the following class diagram. Note that “{immutable}” means once the association is formed, it cannot be changed.</p><img src="/website/book/errorHandling/defensiveProgramming/compulsoryAssociations/images/accountGuarantorImmutable.png"
                            height="80">
                          <p></p>
                          <div slot="answer">
                            <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Account</span> </span>{
    <span class="hljs-keyword">private</span> Guarantor myGuarantor; <span class="hljs-comment">// should not be public</span>

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Account</span><span class="hljs-params">(Guarantor g)</span></span>{
        <span class="hljs-keyword">if</span> (g==<span class="hljs-keyword">null</span>) {
            haltWithErrorMessage(“Account must have a guarantor”);
        }
        myGuarantor = g;
    }
    <span class="hljs-comment">// there should not be a setGuarantor method</span>
}
</code></pre>
                          </div>
                        </question>
                      </panel>
                    </div>
                    <div>
                      <panel header=":lock::key: Defensive Implementation">
                        <question>
                          <p>This is a defensive implementation of the association.</p><img src="/website/book/errorHandling/defensiveProgramming/compulsoryAssociations/images/countryCity.png" height="150">
                          <p></p>
                          <ul class="task-list">
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. True</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. False</li>
                          </ul>
                          <div slot="answer">
                            <ul class="task-list">
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. True</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" checked type="checkbox"> b. False</li>
                            </ul>
                            <p>Explanation: While the design requires a City to be connected to exactly one Country, the code allows it to be connected to zero Country objects (by passing null to the setCountry() method).</p>
                          </div>
                        </question>
                      </panel>
                    </div>
                  </panel>
                </div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="info" header=":trophy: Can use defensive coding to enforce 1-to-1 associations :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Implementation → Error Handling →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="enforcing-1-to-1-associations-three">Enforcing 1-to-1 Associations <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>Consider the association given below. Here, a MinedCell cannot exist without a Mine and vice versa. The only way to enforce this is by simultaneous object creation. However, in Java and C++, only one object can be created at a time. Given
                  below are two alternatives. Both options violate the multiplicity for a short period of time.</p>
                <tip-box>
                  <p>Example:</p><img src="/website/book/errorHandling/defensiveProgramming/1to1Associations/images/minedCell.png" height="50">
                  <p></p>
                  <p>Option 1:</p>
                  <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MinedCell</span> </span>{
    <span class="hljs-keyword">private</span> Mine mine;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MinedCell</span><span class="hljs-params">(Mine m)</span></span>{
        <span class="hljs-keyword">if</span> (m == <span class="hljs-keyword">null</span>) error;
        mine = m;
    }
    …
}
</code></pre>
                  <p>Option 1 forces us to keep a <code>Mine</code> without a <code>MinedCell</code> (until the <code>MinedCell</code> is created).</p>
                  <p>Option 2:</p>
                  <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MinedCell</span> </span>{
    <span class="hljs-keyword">private</span> Mine mine;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MinedCell</span><span class="hljs-params">()</span></span>{
        mine = <span class="hljs-keyword">new</span> Mine();
    }
    …
}
</code></pre>
                  <p>Option 2 is more defensive because the <code>Mine</code> is immediately linked to a <code>MinedCell</code>.</p>
                </tip-box>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="success" header=":trophy: Can use defensive coding to enforce referential integrity of bi-directional associations :star::star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Implementation → Error Handling →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="enforcing-referential-integrity-three">Enforcing Referential Integrity <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>A bidirectional association in the design (shown in (a)) is usually emulated at code level using two variables (as shown in (b)).</p>
                <tip-box>
                  <p>Example:</p><img src="/website/book/errorHandling/defensiveProgramming/referentialIntegrity/images/manWoman.png" height="140">
                  <p></p>
                  <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Man</span> </span>{
    Woman girlfriend;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setGirlfriend</span><span class="hljs-params">(Woman w)</span> </span>{
        girlfriend = w;
    }
    …
}
</code></pre>
                  <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Woman</span> </span>{
    Man boyfriend;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setBoyfriend</span><span class="hljs-params">(Man m)</span> </span>{
        boyfriend = m;
    }
}
</code></pre>
                </tip-box>
                <p>The two classes are meant to be used as shown in (c) below. Now see what happens if the two classes were used as in (d) below. Now James' girlfriend is Jean, while Jean's boyfriend is not James. This situation results as the code was not
                  defensive enough to stop this “love triangle”. In such a situation, we say that <em>the referential integrity has been violated</em>. It simply means <em>there is an inconsistency in object references</em>.</p>
                <tip-box>
                  <p>c)</p>
                  <pre><code class="hljs java">Woman jean;
Man james;
…
james.setGirlfriend(jean);
jean.setBoyfriend(james);
</code></pre>
                </tip-box>
                <tip-box>
                  <p>d)</p>
                  <pre><code class="hljs java">Woman jean; Man james, yong;
…
james.setGirlfriend(jean);  
jean.setBoyfriend(yong);  
</code></pre><img src="/website/book/errorHandling/defensiveProgramming/referentialIntegrity/images/woman.png" height="50">
                  <p></p>
                </tip-box>
                <p>One way to prevent this situation is to implement the two classes as shown below. Note how the referential integrity is maintained.</p>
                <tip-box>
                  <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Woman</span> </span>{
    <span class="hljs-keyword">private</span> Man boyfriend;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBoyfriend</span><span class="hljs-params">(Man m)</span> </span>{
        <span class="hljs-keyword">if</span>(boyfriend == m){
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (boyfriend != <span class="hljs-keyword">null</span>) {
            boyfriend.breakUp();
        }
        boyfriend = m;
        m.setGirlfriend(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">breakUp</span><span class="hljs-params">()</span> </span>{
        boyfriend = <span class="hljs-keyword">null</span>;
    }   
    ...
}
</code></pre>
                  <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Man</span></span>{
    <span class="hljs-keyword">private</span> Woman girlfriend;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setGirlfriend</span><span class="hljs-params">(Woman w)</span> </span>{
        <span class="hljs-keyword">if</span>(girlfriend == w){
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (girlfriend != <span class="hljs-keyword">null</span>) {
            girlfriend.breakUp();
        }
        girlfriend = w;
        w.setBoyfriend(<span class="hljs-keyword">this</span>);
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">breakUp</span><span class="hljs-params">()</span> </span>{
        girlfriend = <span class="hljs-keyword">null</span>;
    }  
   ...
}
</code></pre>
                </tip-box>
                <p>When the code <code>james.setGirlfriend(jean)</code> is executed, the code ensures that <code>james</code> break up with any current girlfriend before he accepts <code>jean</code> as the girlfriend. Furthermore, the code ensures that <code>jean</code>                  breaks up with any existing boyfriends and accepts <code>james</code> as the boyfriend.</p>
              </div>
              <div>
                <div>
                  <panel header=":muscle: Exercises" expandable="">
                    <div>
                      <panel header=":lock::key: Implement the Player and Region classes using a more defensive approach.">
                        <question has-input="true">
                          <p>Imagine that we now support the following feature in our Minesweeper game.</p>
                          <tip-box>
                            <p>Feature ID: multiplayer Description: A minefield is divided into mine regions. Each region is assigned to a single player. Players can swap regions. To win the game, all regions must be cleared.</p>
                          </tip-box>
                          <p>Given below is an extract from our class diagram.</p><img src="/website/book/errorHandling/defensiveProgramming/referentialIntegrity/images/playerRegion.png" height="100">
                          <p></p>
                          <p>Minimally, this can be implemented like this.</p>
                          <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Player</span></span>{
    Region region;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setRegion</span><span class="hljs-params">(Region r)</span> </span>{ region = r;}
    <span class="hljs-function">Region <span class="hljs-title">getRegion</span><span class="hljs-params">()</span> </span>{<span class="hljs-keyword">return</span> region;}
} <span class="hljs-comment">// Region class is similar</span>
</code></pre>
                          <p>However, this is not very defensive. For example, a user of this class can pass a null to either of the methods, thus violating the multiplicity of the relationship.</p>
                          <p>Implement the two classes using a more defensive approach. Take note of the bidirectional link which requires us to preserve referential integrity at all times.</p>
                          <div slot="answer">
                            <p>In this solution, we assume Regions can be created without Players (note that we cannot be 100% defensive all the time). The usage will be something like this:</p>
                            <pre><code class="hljs java">Region r1 = <span class="hljs-keyword">new</span> Region();
Player p1 = <span class="hljs-keyword">new</span> Player(r1);
Region r2 = <span class="hljs-keyword">new</span> Region();
Player p2 = <span class="hljs-keyword">new</span> Player(r2);
p1.setRegion(r2);
r1.setPlayer(p2);
</code></pre>
                            <p>Here are the two classes. Get methods are omitted as they are simple. Note how much extra effort we need to be defensive.</p>
                            <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Region</span> </span>{
    <span class="hljs-keyword">private</span> Player myPlayer;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Region</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// initialise region</span>
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPlayer</span><span class="hljs-params">(Player newPlayer)</span> </span>{
        <span class="hljs-keyword">if</span> (newPlayer == <span class="hljs-keyword">null</span>) {
            stopSystemWithErrorMessage(<span class="hljs-string">"Multiplicity violation"</span>);
        }
        <span class="hljs-keyword">if</span> (myPlayer == newPlayer) {
            <span class="hljs-keyword">return</span>; <span class="hljs-comment">// same player</span>
        }
        <span class="hljs-keyword">if</span> (myPlayer != <span class="hljs-keyword">null</span>) {
            <span class="hljs-comment">// I already have a Player!</span>
            myPlayer.removeRegion(<span class="hljs-keyword">this</span>);
        }
        myPlayer = newPlayer;
        <span class="hljs-comment">// set the reverse link</span>
        myPlayer.setRegion(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">removePlayer</span><span class="hljs-params">(Player disconnectingPlayer)</span> </span>{
        <span class="hljs-keyword">if</span> (myPlayer == disconnectingPlayer) myPlayer = <span class="hljs-keyword">null</span>;
        <span class="hljs-keyword">else</span> stopSystemWithErrorMessage(<span class="hljs-string">"Unknown Player trying to disconnect"</span>)
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">stopSystemWithErrorMessage</span><span class="hljs-params">(String msg)</span> </span>{
        ...
    }
}
</code></pre>
                            <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Player</span> </span>{
    <span class="hljs-keyword">private</span> Region myRegion;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Player</span><span class="hljs-params">(Region region)</span> </span>{
        setRegion(region);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setRegion</span><span class="hljs-params">(Region newRegion)</span> </span>{
        <span class="hljs-keyword">if</span> (newRegion == <span class="hljs-keyword">null</span>) {
            stopSystemWithErrorMessage(<span class="hljs-string">"Multiplicity violation"</span>);
        }
        <span class="hljs-keyword">if</span> (myRegion == newRegion) {
            <span class="hljs-keyword">return</span>; <span class="hljs-comment">// no change in Region!</span>
        }
        <span class="hljs-keyword">if</span> (myRegion != <span class="hljs-keyword">null</span>) {
            <span class="hljs-comment">// previous region exists</span>
            myRegion.removePlayer(<span class="hljs-keyword">this</span>);
        }
        myRegion = newRegion;
        <span class="hljs-comment">// set the reverse link</span>
        myRegion.setPlayer(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">removeRegion</span><span class="hljs-params">(Region disconnectingRegion)</span> </span>{
        <span class="hljs-keyword">if</span> (myRegion == disconnectingRegion) myRegion = <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">stopSystemWithErrorMessage</span><span class="hljs-params">(String msg)</span> </span>{
        ...
    }
}
</code></pre>
                            <p>Note that the above code stops the system when the multiplicity is violated. Alternatively, we can throw an exception and let the caller handle the situation.</p>
                          </div>
                        </question>
                      </panel>
                    </div>
                    <div>
                      <panel header=":lock::key: Implement the bidirectional association between Bank and Account.">
                        <question has-input="true">
                          <p>Implement this bidirectional association. Note that the Bank uses accNumber attribute to uniquely identify an Account object. Assume the Bank class is responsible for maintaining the links between objects.</p><img src="/website/book/errorHandling/defensiveProgramming/referentialIntegrity/images/bankAccount.jpg"
                            height="60">
                          <p></p>
                          <div slot="answer">
                            <p>The code below contains a method in the Bank class to create an account; the bank field in the new account is thereby filled by the bank creating it.</p>
                            <p>We assume that once an Account has been assigned to one Bank, it cannot be assigned to a different Bank. Once the Account is removed from the Bank, it will not be used any more (hence, no need to remove the link from Account
                              to Bank).</p>
                            <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Account</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> accNumber ;
    <span class="hljs-keyword">private</span> Bank theBank ;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Account</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n, Bank b)</span> </span>{
        accno = n ;
        theBank = b ;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getNumber</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> accNumber;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> Bank <span class="hljs-title">getBank</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> theBank ;
    }
}
</code></pre>
                            <pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bank</span> </span>{
    <span class="hljs-keyword">private</span> HashMap&lt; Integer, Account &gt; theAccounts = <span class="hljs-keyword">new</span> HashMap &lt; Integer, Account &gt; ();

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">createAccount</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>{
        addAccount(<span class="hljs-keyword">new</span> Account(n, <span class="hljs-keyword">this</span>)) ;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addAccount</span><span class="hljs-params">(Account a)</span> </span>{          
        theAccounts.put(a.getNumber(), a);
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">removeAccount</span><span class="hljs-params">(<span class="hljs-keyword">int</span> accNumber)</span> </span>{
        theAccounts.remove(accNumber);
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> Account <span class="hljs-title">lookupAccount</span><span class="hljs-params">(<span class="hljs-keyword">int</span> accNumber)</span> </span>{
        <span class="hljs-keyword">return</span> theAccounts.get(accNumber);
    }
}
</code></pre>
                          </div>
                        </question>
                      </panel>
                    </div>
                    <div>
                      <panel header=":lock::key: Is the code given below a defensive translation of the associations shown in the class diagram?">
                        <question has-input="true">
                          <p>(a) Is the code given below a defensive translation of the associations shown in the class diagram? Explain your answer.</p>
                          <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Teacher</span></span>{
    <span class="hljs-keyword">private</span> Student favStudent;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setFavStudent</span><span class="hljs-params">(Student s)</span></span>{
        favStudent = s;
    }
}
</code></pre>
                          <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span></span>{
    <span class="hljs-keyword">private</span> Teacher favTeacher;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setFavTeacher</span><span class="hljs-params">(Teacher t)</span></span>{
        favTeacher = t;
    }
}
</code></pre><img src="/website/book/errorHandling/defensiveProgramming/referentialIntegrity/images/teacherStudent.png" height="80">
                          <p></p>
                          <p>(b) In terms of maintaining referential integrity in the implementation, what is the difference between the following two diagrams?</p><img src="/website/book/errorHandling/defensiveProgramming/referentialIntegrity/images/teacherStudent.png"
                            height="80">
                          <p></p><img src="/website/book/errorHandling/defensiveProgramming/referentialIntegrity/images/manWomanAssoc.png" height="60">
                          <p></p>
                          <p>(c) Show a defensive implementation of the remove(Member m) of the Club class given below.</p><img src="/website/book/errorHandling/defensiveProgramming/referentialIntegrity/images/clubMember.png" height="60">
                          <p></p>
                          <div slot="answer">
                            <p>(a) Yes. Each links is mutable and unidirectional. A simple reference variable is suitable to hold the link.</p>
                            <p><code>Teacher</code> class can be made even more defensive by introducing a <code>resetFavStudent()</code> method to unlink the current favorite student from a teacher. In that case, <code>setFavStudent(Student)</code> method
                              should not accept null. This approach is more defensive because it prevents a null value being passed to <code>setFavStudent(Student)</code> by mistake and being interpreted as a request to delink the current favorite student
                              from the Teacher object.</p>
                            <p>(b) First diagram has unidirectional links. Second has a bidirectional link. RI is only applicable to the second.</p>
                            <p>(c)</p>
                            <pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">removeMember</span><span class="hljs-params">(Member m)</span> </span>{
    <span class="hljs-keyword">if</span> (m==<span class="hljs-keyword">null</span>) <span class="hljs-keyword">throw</span> exception(“<span class="hljs-keyword">this</span> is <span class="hljs-keyword">null</span>, not a member!”);
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(member_count == <span class="hljs-number">10</span>) <span class="hljs-keyword">throw</span> exception(“we need at least <span class="hljs-number">10</span> members to survive!”);
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!isMember(m)) <span class="hljs-keyword">throw</span> exception (“<span class="hljs-keyword">this</span> fellow is not a member of our club!”);
    <span class="hljs-keyword">else</span> members.remove(m); <span class="hljs-comment">// members is a data structure such as ArrayList</span>
}
</code></pre>
                          </div>
                        </question>
                      </panel>
                    </div>
                    <div>
                      <panel header=":lock::key: True or False?">
                        <question>
                          <p>Bidirectional associations, if not implemented properly, can result in referential integrity violations.</p>
                          <ul class="task-list">
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. True</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. False</li>
                          </ul>
                          <div slot="answer">
                            <ul class="task-list">
                              <li class="task-list-item"><input class="task-list-item-checkbox" checked type="checkbox"> a. True</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. False</li>
                            </ul>
                            <p>Explanation: Bidirectional associations require two objects to link to each other. When one of these links is not consistent with the other, we have a RI violation.</p>
                          </div>
                        </question>
                      </panel>
                    </div>
                  </panel>
                </div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="success" header=":trophy: Can explain when to use defensive programming :star::star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Implementation → Error Handling →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="when-two">When <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>It is not necessary to be 100% defensive all the time. While defensive code may be less prone to be misused or abused, such code can also be more complicated and slower to run.</p>
                <p>The degree of defensiveness depends on many factors such as:</p>
                <ul>
                  <li>How critical is the reliability of the system?</li>
                  <li>Will the code be used by programmers other than the author?</li>
                  <li>The level of programming language support for defensive programming</li>
                  <li>The overhead of being defensive.</li>
                </ul>
              </div>
              <div>
                <div>
                  <panel header=":muscle: Exercises" expandable="">
                    <div>
                      <panel header=":lock::key: Defensive programming">
                        <question>
                          <p>Defensive programming,</p>
                          <ul class="task-list">
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. can make the program slower.</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. can make the code longer.</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> c. can make the code more complex.</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> d. can make the code less susceptible to misuse.</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> e. can require extra effort.</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> f. is all of the above.</li>
                          </ul>
                          <div slot="answer">
                            <ul class="task-list">
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. can make the program slower.</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. can make the code longer.</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> c. can make the code more complex.</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> d. can make the code less susceptible to misuse.</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> e. can require extra effort.</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" checked type="checkbox"> f. is all of the above.</li>
                            </ul>
                            <p>Explanation: Defensive programming requires a more checks, possibly making the code longer, more complex, and possibly slower. Use it only when benefits outweigh costs, which is often.</p>
                          </div>
                        </question>
                      </panel>
                    </div>
                  </panel>
                </div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="success" header=":trophy: Can explain DbC approach :star::star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Implementation → Error Handling →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="what-three">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>Suppose an operation is implemented with the behavior specified precisely in the API (preconditions, post conditions, exceptions etc.). When following the defensive approach, the code should first check if the preconditions have been met.
                  Typically, exceptions are thrown if preconditions are violated. In contrast, the <em>Design-by-Contract (DbC)</em> approach to coding assumes that it is the responsibility of the caller to ensure all preconditions are met. The operation
                  will honor the contract only if the preconditions have been met. If any of them have not been met, the behavior of the operation is “unspecified”.</p>
                <p>Languages such as Eiffel have native support for DbC. For example, preconditions of an operation can be specified in Eiffel and the language runtime will check precondition violations without the need to do it explicitly in the code. To
                  follow the DbC approach in languages such as Java and C++ where there is no built-in DbC support, assertions can be used to confirm pre-conditions.</p>
              </div>
              <div>
                <div>
                  <panel header=":muscle: Exercises" expandable="">
                    <div>
                      <panel header=":lock::key: What is the incorrect statement about the Design-by-contract approach to coding?">
                        <question>
                          <p>What is the incorrect statement about the Design-by-contract approach to coding?</p>
                          <ul class="task-list">
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. It is not natively supported by Java and C++.</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. It is an alternative to OOP.</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> c. It assumes the caller of a method is responsible for ensuring all preconditions are met.</li>
                          </ul>
                          <div slot="answer">
                            <ul class="task-list">
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. It is not natively supported by Java and C++.</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" checked type="checkbox"> b. It is an alternative to OOP.</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> c. It assumes the caller of a method is responsible for ensuring all preconditions are met.</li>
                            </ul>
                            <p>Explanation: DbC is not an alternative to OOP. We can use DbC in an OOP solution. DbC is an alternative to defensive programming.</p>
                          </div>
                        </question>
                      </panel>
                    </div>
                  </panel>
                </div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
      </panel>
    </div>
    <div>
      <panel type="danger" header=":trophy: Can reduce coupling :star:" expandable="" expanded="" no-close="">
        <panel type="danger" header=":trophy: Can explain coupling :star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Design Principles →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="what-one-8">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p><em>Coupling</em> is a measure of the degree of <em>dependence</em> between components, classes, methods, etc. Low coupling indicates that a component is less dependent on other components. In the example below, design A appears to have
                  a more coupling between the components than design B.</p>
                <tip-box>
                  <p>Example:</p><img src="/website/book/designPrinciples/coupling/what/images/playerPuzzleManager.png" height="220">
                  <p></p>
                </tip-box>
              </div>
              <div>
                <div>
                  <panel header=":muscle: Exercises" expandable="">
                    <div>
                      <panel header="Q: Discuss the coupling levels of alternative designs x and y.">
                        <question has-input="true">
                          <p>Discuss the coupling levels of alternative designs x and y.</p>
                          <tip-box><img src="/website/book/designPrinciples/coupling/what/images/alternativeDesigns.png" height="180">
                            <p></p>
                          </tip-box>
                          <div slot="answer">
                            <p>Overall coupling levels in <em>x</em> and <em>y</em> seem to be similar (neither has more dependencies than the other). (Note that the number of dependency links is not a definitive measure of the level of coupling. Some links
                              may be stronger than the others.). However, in <em>x</em>, A is highly-coupled to the rest of the system while <em>B</em>, <em>C</em>, <em>D</em>, and <em>E</em> are standalone (do not depend on anything else). In <em>y</em>,
                              no component is as highly-coupled as <em>A</em> of <em>x</em>. However, only <em>D</em> and <em>E</em> are standalone.</p>
                          </div>
                        </question>
                      </panel>
                    </div>
                  </panel>
                </div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="danger" header=":trophy: Can justify the need to reduce coupling :star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Design Principles →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="why-one">Why <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>Highly coupled (also referred to as tightly coupled or strongly coupled) systems display the following disadvantages:</p>
                <ul>
                  <li>A change in one module usually forces changes in other modules coupled to it (i.e. a ripple effect).</li>
                  <li>Integration is harder because multiple components coupled with each other have to be integrated at the same time.</li>
                  <li>Testing and reuse of the module is harder due to its dependence on other modules.</li>
                </ul>
                <p>In the case of high-coupling (i.e. relatively high dependency), a change in one component may require changes in other coupled components. Therefore, we should strive to achieve a low-coupled design.</p>
              </div>
              <div>
                <div>
                  <panel header=":muscle: Exercises" expandable="">
                    <div>
                      <panel header=":lock::key: Explain the link (if any) between regression and coupling.">
                        <question has-input="true">
                          <p>Explain the link (if any) between regression and coupling.</p>
                          <div slot="answer">
                            <p>When the system is highly-coupled, the risk of regression is higher too. When component A is modified, all components ‘coupled’ to component A risk ‘unintended behavioral changes’.</p>
                          </div>
                        </question>
                      </panel>
                    </div>
                    <div>
                      <panel header=":lock::key: Discuss the relationship between coupling and testability (testability is a measure of how easily a given component can be tested).">
                        <question has-input="true">
                          <p>Discuss the relationship between coupling and testability (testability is a measure of how easily a given component can be tested).</p>
                          <div slot="answer">
                            <p>Coupling decreases testability as it is difficult to isolate highly-coupled objects.</p>
                          </div>
                        </question>
                      </panel>
                    </div>
                    <div>
                      <panel header=":lock::key: Choose the least correct statement.">
                        <question>
                          <p>Choose the least correct statement.</p>
                          <ul class="task-list">
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. As coupling increases, testability decreases.</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. As coupling increases, the risk of regression increases.</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> c. As coupling increases, the value of automated regression testing increases.</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> d. As coupling increases, integration becomes easier as everything is connected together.</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> e. As coupling increases, maintainability decreases.</li>
                          </ul>
                          <div slot="answer">
                            <ul class="task-list">
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. As coupling increases, testability decreases.</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. As coupling increases, the risk of regression increases.</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> c. As coupling increases, the value of automated regression testing increases.</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" checked type="checkbox"> d. As coupling increases, integration becomes easier as everything is connected together.</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> e. As coupling increases, maintainability decreases.</li>
                            </ul>
                            <p>Explanation: High coupling means either more components require to be integrated at once in a big-bang fashion (increasing the risk of things going wrong) or more drivers and stubs are required when integrating incrementally.</p>
                          </div>
                        </question>
                      </panel>
                    </div>
                  </panel>
                </div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="success" header=":trophy: Can identify types of coupling :star::star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Design Principles →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="types-of-coupling-three">Types of Coupling <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>Temporal coupling etc.</p>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
      </panel>
    </div>
    <div>
      <panel type="danger" header=":trophy: Can increase cohesion :star:" expandable="" expanded="" no-close="">
        <panel type="danger" header=":trophy: Can explain cohesion :star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Design Principles →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="what-one-9">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p><em>Cohesion</em> is a measure of how strongly-related and focused the various responsibilities of a component are. A highly-cohesive component keeps related functionalities together while keeping out all other unrelated things.</p>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="danger" header=":trophy: Can justify the need to increase cohesion :star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Design Principles →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="why-one-2">Why <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>The following are some disadvantages of low cohesion (or “weak cohesion”).</p>
                <ul>
                  <li>Impedes the understandability of modules as it is difficult to express module functionalities at a higher level.</li>
                  <li>Difficulty in maintaining modules because a localized adjustment in the requirements can result in changes spread across the system since requirement-related functionality is implemented across many components of the system.</li>
                  <li>Modules become less reusable because they do not represent logical units of functionality.</li>
                </ul>
                <p>One should strive for high cohesion to facilitate code maintenance and reuse.</p>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
      </panel>
    </div>
    <div>
      <panel type="success" header=":trophy: Can follow TDD :star::star::star::star:" expandable="" expanded="" no-close="">
        <panel type="success" header=":trophy: Can explain TDD :star::star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Quality Assurance → Testing → Test-Driven Development →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="what-two">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>Typically, tests are written after writing the SUT. However, TDD advocates writing the tests before writing the SUT. In other words, first define the precise behavior of the SUT using test cases, and then write the SUT to match the specified
                  behavior. While TDD has its fair share of detractors, there are many who consider it a good way to reduce defects.</p>
              </div>
              <div>
                <div>
                  <panel header=":muscle: Exercises" expandable="">
                    <div>
                      <panel header=":lock::key: True or False?">
                        <question>
                          <p>A) In TDD, we write all the test cases before we start writing functional code.</p>
                          <ul class="task-list">
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. True</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. False</li>
                          </ul>
                          <p>B) Testing tools such as Junit require us to follow TDD.</p>
                          <ul class="task-list">
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. True</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. False</li>
                          </ul>
                          <div slot="answer">
                            <p>A) In TDD, we write all the test cases before we start writing functional code.</p>
                            <ul class="task-list">
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. True</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" checked type="checkbox"> b. False</li>
                            </ul>
                            <p>Explanation: No, not <em>all</em>. We proceed in small steps, writing tests and functional code in tandem, but writing the test before we write the corresponding functional code.</p>
                            <p>B) Testing tools such as Junit require us to follow TDD.</p>
                            <ul class="task-list">
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. True</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" checked type="checkbox"> b. False</li>
                            </ul>
                            <p>Explanation: They can be used for TDD, but they can be used without TDD too.</p>
                          </div>
                        </question>
                      </panel>
                    </div>
                  </panel>
                </div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
      </panel>
    </div>
    <div>
      <panel type="warning" header=":trophy: Can explain abstraction :star::star:" expandable="" expanded="" no-close="">
        <panel type="warning" header=":trophy: Can explain what is software design :star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Design →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="basic-one">Basic <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>What is software design? Design can be viewed as a form of problem solving.</p>
                <p>Where does it fit in?</p>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
      </panel>
    </div>
    <div>
      <panel type="warning" header=":trophy: Can use simple class diagrams and sequence diagrams to model an OO solution :star::star:" expandable="" expanded="" no-close="">
        <panel type="warning" header=":trophy: Can explain the use how design modelling can be used before implementation :star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Object Oriented Programming →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="introduction-one">Introduction <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>Suppose we are planning to implement a simple minesweeper game that has a text based UI and a GUI. Given below is a possible OOP design for the game.</p>
                <tip-box>
                  <p>Example:</p><img src="/website/book/oopDesign/conceptualizingSolution/introduction/images/textLogicMinefieldCell.png" height="50">
                  <p></p>
                </tip-box>
                <p>Before jumping into coding, we may want to find out things such as,</p>
                <ul>
                  <li>Is this class structure is able to produce the behavior we want?</li>
                  <li>What API should each class have?</li>
                  <li>Do we need more classes?</li>
                </ul>
                <p>To answer those questions, we can analyze the how the objects of these classes will interact with each other to produce the behavior we want.</p>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="info" header=":trophy: Can use intermediate class diagram and sequence diagram concepts to model an OO design :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Object Oriented Programming →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="intermediate-three">Intermediate <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>Next, let us model how the TextUi interacts with the Logic to support the mark or clear operations until the game is won or lost.</p>
                <p>
                  <panel src="/website\book\uml\sequenceDiagrams\referenceFrames\embed._include_.html" header="UML: Sequence Diagrams: Reference Frames" is-open="" isOpen="false" no-close="true" no-switch="true"></panel>
                </p>
                <p></p>
                <tip-box>
                  <p>Example:</p><img src="/website/book/oopDesign/conceptualizingSolution/intermediate/images/playerTextLogicRef.png" height="250">
                  <p></p><img src="/website/book/oopDesign/conceptualizingSolution/intermediate/images/textLogicSd.png" height="210">
                  <p></p>
                </tip-box>
                <p>This interaction adds the following methods to the <code>Logic</code> class</p>
                <ul>
                  <li><code>clearCellAt(int x, int y)</code></li>
                  <li><code>markCellAt(int x, int y)</code></li>
                  <li><code>getGameState() :GAME_STATE (GAME_STATE: READY, IN_PLAY, WON, LOST, …)</code></li>
                </ul>
                <p>And it adds the following operation to Logic API:</p>
                <ul>
                  <li><code>getAppearanceOfCellAt(int,int):CELL_APPEARANCE (CELL_APPEARANCE: HIDDEN, ZERO, ONE, TWO, THREE, …, MARKED, INCORRECTLY_MARKED, INCORRECTLY_CLEARED)</code></li>
                </ul>
                <p>In the above design, <code>TextUi</code> does not access <code>Cell</code> objects directly. Instead, it gets values of type <code>CELL_APPEARANCE</code> from <code>Logic</code> to be displayed as a minefield to the player. Alternatively,
                  each cell or the entire Minefield can be passed directly to <code>TextUi</code>.</p>
                <p>Here is the updated class diagram:</p>
                <tip-box><img src="/website/book/oopDesign/conceptualizingSolution/intermediate/images/textLogicMinefieldCell.png" height="200">
                  <p></p>
                </tip-box>
                <p>The above is for the case when Actor <code>Player</code> interacts with the system using a text UI. Additional operations (if any) required for the GUI can be discovered similarly. Suppose <code>Logic</code> supports a <code>reset()</code>                  operation. We can model it like this:</p>
                <p>
                  <panel src="/website\book\uml\sequenceDiagrams\objectDeletion\embed._include_.html" header="UML: Sequence Diagrams: Object Deletion" is-open="" isOpen="false" no-close="true" no-switch="true"></panel>
                </p>
                <p></p>
                <tip-box><img src="/website/book/oopDesign/conceptualizingSolution/intermediate/images/logicMinefieldReset.png" height="100">
                  <p></p>
                </tip-box>
                <p>Our current model assumes that the <code>Minefield</code> object has enough information (i.e. H, W, and mine locations) to create itself.</p>
                <tip-box><img src="/website/book/oopDesign/conceptualizingSolution/intermediate/images/logicMinefieldNewGame.png" height="85">
                  <p></p>
                </tip-box>
                <p>An alternative is to have a <code>ConfigGenerator</code> object that generates a string containing the minefield information as shown below.</p>
                <tip-box><img src="/website/book/oopDesign/conceptualizingSolution/intermediate/images/logicConfigGenerator.png" height="170">
                  <p></p>
                </tip-box>
                <p>In addition, <code>getWidth()</code>, <code>getHeight()</code>, <code>markCellAt(x,y)</code> and <code>clearCellAt(x,y)</code> can be handled like this.</p>
                <tip-box><img src="/website/book/oopDesign/conceptualizingSolution/intermediate/images/logicMinefieldFunctions.png" height="180">
                  <p></p>
                </tip-box>
                <p>The updated class diagram:</p>
                <tip-box><img src="/website/book/oopDesign/conceptualizingSolution/intermediate/images/textLogicMinefieldCellConfigGenerator.png" height="250">
                  <p></p>
                </tip-box>
                <p>How is <code>getGameState()</code> operation supported? Given below are two ways (there could be other ways):</p>
                <ol>
                  <li><code>Minefield</code> class knows the state of the game at any time. <code>Logic</code> class retrieves it from the <code>Minefield</code> class as and when required.</li>
                  <li><code>Logic</code> class maintains the state of the game at all times.</li>
                </ol>
                <p>Here’s the SD for option 1.</p>
                <tip-box><img src="/website/book/oopDesign/conceptualizingSolution/intermediate/images/logicMinefieldGetGameState.png" height="180">
                  <p></p>
                </tip-box>
                <p>Here’s the SD for option 2. Here, assume that the game state is updated after every mark/clear action.</p>
                <p>
                  <panel src="/website\book\uml\sequenceDiagrams\selfInvocation\embed._include_.html" header="UML: Sequence Diagrams: Self-Invocation" is-open="" isOpen="false" no-close="true" no-switch="true"></panel>
                </p>
                <p></p>
                <tip-box><img src="/website/book/oopDesign/conceptualizingSolution/intermediate/images/logicMinefieldUpdateState.png" height="250">
                  <p></p>
                </tip-box>
                <p>It is now time to explore what happens inside the <code>Minefield</code> constructor? One way is to design it as follows.</p>
                <p>
                  <panel src="/website\book\uml\sequenceDiagrams\alternativePaths\embed._include_.html" header="UML: Sequence Diagrams: Alternative Paths" is-open="" isOpen="false" no-close="true" no-switch="true"></panel>
                </p>
                <p></p>
                <tip-box><img src="/website/book/oopDesign/conceptualizingSolution/intermediate/images/minefieldCellAlt.png" height="200">
                  <p></p>
                </tip-box>
                <p>Now let us assume that <code>Minesweeper</code> supports a ‘timing’ feature.</p>
                <p>
                  <panel src="/website\book\uml\sequenceDiagrams\optionalPaths\embed._include_.html" header="UML: Sequence Diagrams: Optional Paths" is-open="" isOpen="false" no-close="true" no-switch="true"></panel>
                </p>
                <p></p>
                <tip-box><img src="/website/book/oopDesign/conceptualizingSolution/intermediate/images/logicTimerOpt.png" height="130">
                  <p></p>
                </tip-box>
                <p>Updated class diagram:</p>
                <tip-box><img src="/website/book/oopDesign/conceptualizingSolution/intermediate/images/fullClassDiagram.png" height="250">
                  <p></p>
                </tip-box>
                <tip-box type="info">
                  <p>When designing components, it is not necessary to draw elaborate UML diagrams capturing all details of the design. They can be done as rough sketches. For example, draw sequence diagrams only when you are not sure which operations are
                    required by each class, or when you want to verify that your class structure can indeed support the required operations.</p>
                </tip-box>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
      </panel>
    </div>
    <div>
      <panel type="info" header=":trophy: Can implement association classes :star::star::star:" expandable="" expanded="" no-close="">
        <panel type="info" header=":trophy: Can explain the meaning of association classes :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Object Oriented Programming →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="association-classes-three">Association Classes <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>At times, there is a need to store additional information about an association. For example, a <code>Man</code> class and a <code>Woman</code> class linked with a ‘married to’ association might also require the date of marriage to be stored.
                  However, that data is related to the association but not specifically owned by either the <code>Man</code> object or the <code>Woman</code> object. In such situations, an additional class can be introduced, e.g. a <code>Marriage</code>                  class, to store such information. These classes are called <em>association classes</em>.</p>
                <p>
                  <panel src="/website\book\uml\classDiagrams\associationClasses\topicPanel._include_.html" header="UML: Class Diagrams: Association Classes" is-open="" isOpen="false" no-close="true" no-switch="true"></panel>
                </p>
                <p></p>
                <tip-box>
                  <p>Example:</p><img src="/website/book/oopDesign/associations/associationClasses/images/manWoman.png" height="120">
                  <p></p>
                </tip-box>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="info" header=":trophy: Can interpret association classes in class diagrams :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Tools → UML →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="what-three-2">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>Association classes are denoted as a connection to an association link using a dashed line as shown below.</p>
                <tip-box>
                  <p>Example:</p><img src="/website/book/uml/classDiagrams/associationClasses/what/images/manWoman.png" height="150">
                  <p></p>
                </tip-box>
              </div>
              <div></div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
      </panel>
    </div>
    <panel type="info" header=":trophy: Can explain open-closed principle (OCP) :star::star::star:" expandable="">
      <div>
        <p><span class="dimmed"><strong><span>Design → Design Principles →
</span></strong>
          </span>
        </p>
        <div>
          <h4 id="what-one-10">What <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0031-20e3.png"></h4>
        </div>
        <div id="main">
          <div>
            <p>While it is possible to isolate the functionalities of a software system into modules, there is no way to remove interaction between modules. When modules interact with each other, coupling naturally increases. Consequently, it is harder to
              localize any changes to the software system. In 1988, Bertrand Meyer proposed a guiding principle to alleviate this problem. The principle, known as the <em>open-closed principle</em>, states: “A module should be <em>open</em> for extension
              but <em>closed</em> for modification”. That is, modules should be written so that they can be extended, without requiring them to be modified. In other words, changing what the modules do without changing the source code of the modules.</p>
            <p>In object-oriented programming, these two seemingly opposing requirements can be achieved in various ways. This often requires separating the <em>specification (interface)</em> of a module from its <em>implementation</em>.</p>
            <tip-box>
              <p>Example:</p><img src="/website/book/designPrinciples/openClosedPrinciple/what/images/commandQueue.png" height="170">
              <p></p>
              <p>The behavior of the <code>CommandQueue</code> class can be altered by adding more concrete <code>Command</code> subclasses. For example, by including a <code>Delete</code> class alongside <code>List</code>, <code>Sort</code>, and <code>Reset</code>,
                the <code>CommandQueue</code> can now perform delete commands without modifying its code at all. Indeed, its behavior was extended without having to open up and modify its code. Hence, it was open to extensions, but closed to modification.</p>
            </tip-box>
            <tip-box>
              <p>The behavior of a Java generic class can be altered by passing it a different class as a parameter. In the code below, the <code>ArrayList</code> class behaves as a container of <code>Students</code> in one instance and as a container of
                <code>Admin</code> objects in the other instance, without having to change its code. That is, the behavior of the <code>ArrayList</code> class is extended without modifying its code.</p>
              <pre><code class="hljs java">ArrayList students = <span class="hljs-keyword">new</span> ArrayList&lt; Student &gt;();
ArrayList admins = <span class="hljs-keyword">new</span> ArrayList&lt; Admin &gt;();  	
</code></pre>
            </tip-box>
          </div>
          <div>
            <div>
              <panel header=":muscle: Exercises" expandable="">
                <div>
                  <panel header=":lock::key: Choose the correct statement.">
                    <question>
                      <p>Which of these is closest to the meaning of the open-closed principle?</p>
                      <ul class="task-list">
                        <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. We should be able to change a software module’s behavior without modifying its code.</li>
                        <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. A software module should remain open to modification as long as possible.</li>
                        <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> c. A software module should be either open to modification and closed to extension.</li>
                        <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> d. Open source software rocks. Closed source software sucks.</li>
                      </ul>
                      <div slot="answer">
                        <ul class="task-list">
                          <li class="task-list-item"><input class="task-list-item-checkbox" checked type="checkbox"> a. We should be able to change a software module’s behavior without modifying its code.</li>
                          <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. A software module should remain open to modification as long as possible.</li>
                          <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> c. A software module should be either open to modification and closed to extension.</li>
                          <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> d. Open source software rocks. Closed source software sucks.</li>
                        </ul>
                        <p>Explanation: Please refer the handout for the definition of OCP.</p>
                      </div>
                    </question>
                  </panel>
                </div>
              </panel>
            </div>
            <div></div>
          </div>
        </div>
      </div>
      <panel header=":dart: Evidence" expanded="">
        <p>...</p>
      </panel>
    </panel>
    <panel type="info" header=":trophy: Can use advanced class diagrams :star::star::star:" expandable="">
      <div>
        <p><span class="dimmed"><strong><span>Design → Modeling →
</span></strong>
          </span>
        </p>
        <div>
          <h4 id="class-diagrams-advanced-three">Class Diagrams - Advanced <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
        </div>
        <div id="main">
          <div>
            <p>
              <panel src="/website\book\oopDesign\inheritance\interfaces\embed._include_.html" header="OOP: Inheritance: Interfaces" is-open="" isOpen="false" no-close="true" no-switch="true"></panel>
              <panel src="/website\book\oopDesign\inheritance\abstractClasses\embed._include_.html" header="OOP: Inheritance: Abstract Classes" is-open="" isOpen="false" no-close="true" no-switch="true"></panel>
              <panel src="/website\book\oopDesign\associations\associationClasses\embed._include_.html" header="OOP: Associations: Association Classes" is-open="" isOpen="false" no-close="true" no-switch="true"></panel>
            </p>
          </div>
          <div>
            <div>
              <panel header=":muscle: Exercises" expandable="">
                <div>
                  <panel header=":lock::key: Which one of the statement below does not match the class diagram.">
                    <question>
                      <p>Which one of the statement below does not match the class diagram.</p><img src="/website/book/modeling/modelingStructures/classDiagramsAdvanced/images/mismatch.png" height="290">
                      <p></p>
                      <ul class="task-list">
                        <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. A Snake must belong to at least one board.</li>
                        <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. A SnakeHeadSquare can contain only one Snake head.</li>
                        <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> c. A Square can contain a Snake head.</li>
                        <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> d. A Snake head can be in more than one SnakeHeadSquare</li>
                        <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> e. The Board has exactly 5 snakes.</li>
                      </ul>
                      <div slot="answer">
                        <ul class="task-list">
                          <li class="task-list-item"><input class="task-list-item-checkbox" checked type="checkbox"> a. A Snake must belong to at least one board.</li>
                          <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. A SnakeHeadSquare can contain only one Snake head.</li>
                          <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> c. A Square can contain a Snake head.</li>
                          <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> d. A Snake head can be in more than one SnakeHeadSquare</li>
                          <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> e. The Board has exactly 5 snakes.</li>
                        </ul>
                        <p>Explanation:</p>
                        <p>(a) does not match because a Snake may or may not belong to a board (multiplicity is 0..1). (b) matches the diagram because the multiplicity given in 1. (c) matches the diagram because SnakeHeadSquare is a Sqaure (due to inheritance).
                          (d) matches the diagram because the multiplicity given is * . (e) matches the diagram because the multiplicity given in 5.</p>
                      </div>
                    </question>
                  </panel>
                </div>
              </panel>
            </div>
            <div></div>
          </div>
        </div>
      </div>
      <panel header=":dart: Evidence" expanded="">
        <p>...</p>
      </panel>
    </panel>
    <panel type="success" header=":trophy: Can explain dependency inversion principle (DIP) :star::star::star::star:" expandable="">
      <div>
        <p><span class="dimmed"><strong><span>Supplmentary → Principles →
</span></strong>
          </span>
        </p>
        <div>
          <h4 id="dependency-inversion-principle-four">Dependency Inversion Principle <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0034-20e3.png"></h4>
        </div>
        <div id="main">
          <div>
            <tip-box type="primary">
              <div>
                <p><strong>Dependency Inversion Principle</strong>:</p>
                <ol>
                  <li>High-level modules should not depend on low-level modules. Both should depend on abstractions.</li>
                  <li>Abstractions should not depend on details. Details should depend on abstractions.</li>
                </ol>
              </div>
            </tip-box>
            <tip-box>
              <p>Example:</p>
              <p>In design (a), the higher level class <code>Payroll</code> depends on the lower level class <code>Employee</code>, a violation of DIP. In design (b), both <code>Payroll</code> and <code>Employee</code> depends on the <code>Payee</code> interface
                (note that inheritance is a dependency). Design (b) is more flexible (and less coupled) because now the <code>Payroll</code> class need not change when the <code>Employee</code> class changes. Here, <code>Payee</code> is the abstraction
                and is owned by the <code>Payroll</code> class.</p><img src="/website/book/principles/dependencyInversionPrinciple/images/payroll.png" height="130">
              <p></p>
            </tip-box>
          </div>
          <div>
            <div></div>
          </div>
        </div>
      </div>
      <panel header=":dart: Evidence" expanded="">
        <p>...</p>
      </panel>
    </panel>
    <panel type="success" header=":trophy: Can explain interface segregation principle :star::star::star::star:" expandable="">
      <div>
        <p><span class="dimmed"><strong><span>Supplmentary → Principles →
</span></strong>
          </span>
        </p>
        <div>
          <h4 id="interface-segregation-principle-four">Interface Segregation Principle <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0034-20e3.png"></h4>
        </div>
        <div id="main">
          <div>
            <tip-box type="primary">
              <div>
                <p><strong>Interface Segregation Principle (ISP)</strong>: No client should be forced to depend on methods it does not use.</p>
              </div>
            </tip-box>
            <tip-box>
              <p>Example:</p>
              <p>The <code>Payroll</code> class should not depend on the <code>AdminStaff</code> class because it does not use the <code>arrangeMeeting()</code> method. Instead, it should depend on the <code>SalariedStaff</code> interface.</p>
              <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Payroll</span> </span>{
    <span class="hljs-comment">//...    </span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">adjustSalaries</span><span class="hljs-params">(AdminStaff adminStaff)</span></span>{ <span class="hljs-comment">//violates ISP</span>
        <span class="hljs-comment">//...</span>
    }

}
</code></pre>
              <pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Payroll</span> </span>{
    <span class="hljs-comment">//...    </span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">adjustSalaries</span><span class="hljs-params">(SalariedStaff staff)</span></span>{ <span class="hljs-comment">//does not violate ISP</span>
        <span class="hljs-comment">//...</span>
    }
}
</code></pre><img src="/website/book/principles/interfaceSegregationPrinciple/images/payroll.png" height="200">
              <p></p>
            </tip-box>
          </div>
          <div>
            <div></div>
          </div>
        </div>
      </div>
      <panel header=":dart: Evidence" expanded="">
        <p>...</p>
      </panel>
    </panel>
    <panel type="danger" header=":trophy: Can work with a 10 KLoC code base :star:" expandable="">
      <panel header=":dart: Evidence" expanded="">
        <p>...</p>
      </panel>
    </panel>
    <div>
      <panel type="info" header=":trophy: Can implement substitutability :star::star::star:" expandable="" expanded="" no-close="">
        <panel type="info" header=":trophy: Can explain substitutability :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Object Oriented Programming →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="substitutability-two">Substitutability <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0032-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <tip-box>
                  <p>Example:</p><img src="/website/book/oopDesign/inheritance/substitutability/images/staff.png" height="50">
                  <p></p>
                </tip-box>
                <p>Every instance of a subclass is an instance of the superclass, but not vice-versa. For example, an <code>Academic</code> is an instance of a <code>Staff</code>, but a <code>Staff</code> is not necessarily an instance of an <code>Academic</code>.
                  As a result, inheritance allows <em>substitutability</em>. i.e. wherever an object of the superclass is expected, it can be substituted by an object of any of its subclasses. For example, the following code is valid because an <code>AcademicStaff</code>                  object is substitutable as a <code>Staff</code> object.</p>
                <pre class="hljs"><code>Staff staff = new AcademicStaff (); // OK
</code></pre>
                <p>But the following code is not because <code>staff</code> is declared as a <code>Staff</code> type (see above) and therefore its value may or may not be of type <code>AcademicStaff</code>, which is the type expected by variable <code>academicStaff</code>.</p>
                <pre
                  class="hljs"><code>AcademicStaff academicStaff = staff; // Not OK
</code></pre>
                  <p>{link up with Liskov Substitution Principle}</p>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="success" header=":trophy: Can explain dynamic and static binding :star::star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Object Oriented Programming →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="dynamic-and-static-binding-three">Dynamic and Static Binding <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>Overridden operations are <strong>resolved at runtime</strong>. That is, the runtime decides which version of the operation should be executed based on the actual type of the receiving object. This is also called <em>dynamic binding</em>                  (sometimes called <em>late binding</em> and <em>run-time binding</em>). Most OO languages support dynamic binding.</p>
                <tip-box type="info">
                  <p>There are subtle differences between late binding and dynamic binding, but they are beyond the scope of this document.</p>
                </tip-box>
                <tip-box>
                  <p>Example:</p><img src="/website/book/oopDesign/inheritance/dynamicAndStaticBinding/images/staff.png" height="150">
                  <p></p>
                  <pre class="hljs"><code>void adjustSalary(int byPercent) {
    for (Staff s: staff) {
        s.adjustSalary(byPercent);
    }
}
</code></pre>
                  <p>The <strong>declared</strong> type of s is <code>Staff</code> and it appears as if the <code>adjustSalary(int)</code> operation of the <code>Staff</code> class is invoked. However, at runtime the <code>adjustSalary(int)</code> operation
                    of the actual object will be called (i.e. <code>adjustSalary(int)</code> operation of Admin or Academic). If the actual object does not override that operation, the operation defined in the immediate superclass (in this case, Staff
                    class) will be called.</p>
                </tip-box>
                <p>In contrast, overloaded methods are resolved at compile time, also called <em>static binding</em> (also called <em>early binding</em> and <em>compile-time binding</em>.)</p>
                <tip-box>
                  <pre class="hljs"><code>class Account {
    Account () {
        // Signature: ()
        ...
    }
    Account (String name, String number, double balance) {
        // Signature: (String, String, double)
        ...
    }
}
</code></pre>
                  <pre class="hljs"><code>void calculateCAP (String matric) { ... }
void calculateCAP (int[] averages) { ... }
</code></pre>
                  <p>The calls to the two constructors are resolved at compile time.</p>
                </tip-box>
              </div>
              <div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="info" header=":trophy: Can explain how substitutability operation overriding, and dynamic binding relates to polymorphism :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Design → Object Oriented Programming →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="mechanism-three">Mechanism <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <p>There are three issues that are at the center of how polymorphism is achieved: <em>substitutability, operation overriding, and dynamic binding</em>.</p>
                <ul>
                  <li>Substitutability: Because of substitutability, we can write code that expects object of a parent class and yet use that code with objects of child classes. That is how polymorphism is able to <em>treat objects of different types as one type</em>.</li>
                  <li>Overriding: To get polymorphic behavior from an operation, the operation in the superclass needs to be overridden in each of the subclasses. That is how overriding allows objects of different sub classes to <em>display different behaviors in response to the same method call</em>.</li>
                  <li>Dynamic binding: Overridden methods are bound to the method implementation dynamically during the runtime. That is how the code can call the method of the parent class and yet execute the implementation of the child class.</li>
                </ul>
              </div>
              <div>
                <div>
                  <panel header=":muscle: Exercises" expandable="">
                    <div>
                      <panel header=":lock::key: Which of these is least related to how OO programs achieve polymorphism?">
                        <question>
                          <p>Which of these is least related to how OO programs achieve polymorphism?</p>
                          <ul class="task-list">
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. substitutability</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. dynamic binding</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> c. operation overloading</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> d. interfaces</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> e. abstract classes</li>
                          </ul>
                          <div slot="answer">
                            <ul class="task-list">
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. substitutability</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. dynamic binding</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" checked type="checkbox"> c. operation overloading</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> d. interfaces</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> e. abstract classes</li>
                            </ul>
                            <p>Explanation: Operation overriding is the one that is related, not operation overloading.</p>
                          </div>
                        </question>
                      </panel>
                    </div>
                  </panel>
                </div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
        <panel type="info" header=":trophy: Can explain Liskov Substitution Principle :star::star::star:" expandable="">
          <div>
            <p><span class="dimmed"><strong><span>Supplmentary → Principles →
</span></strong>
              </span>
            </p>
            <div>
              <h4 id="liskov-substitution-principle-three">Liskov Substitution Principle <img style="height: 1em;width: 1em;margin: 0 .05em 0 .1em;vertical-align: -0.1em;" src="https://assets-cdn.github.com/images/icons/emoji/unicode/0033-20e3.png"></h4>
            </div>
            <div id="main">
              <div>
                <tip-box type="primary">
                  <div>
                    <p><strong>Liskov Substitution Principle (LSP)</strong>: Derived classes must be substitutable for their base classes. -- Barbara Liskov</p>
                  </div>
                </tip-box>
                <p>In other words, if a program module is using a super class, then the reference to the super class can be replaced with a sub class without affecting the functionality of the program module.</p>
                <p>As we know, Java already allows substituting objects of sub classes where an object of the super class is expected. However, that does not mean that doing so will not break the functionality of the code. To follow LSP, we should be careful
                  not to contradict the behavior specified by the super class.</p>
                <tip-box>
                  <p>Example:</p><img src="/website/book/principles/liskovSubstitutionPrinciple/images/payroll.png" height="200">
                  <p></p>
                  <p>Suppose the <code>Payroll</code> class depends on the <code>adjustMySalary(int percent)</code> method of the <code>Staff</code> class. Furthermore, the <code>Staff</code> class states that the <code>adjustMySalary</code> method will
                    work for all positive percent values. Both <code>Admin</code> and <code>Academic</code> classes override the <code>adjustMySalary</code> method. Now consider the following:</p>
                  <ul>
                    <li><code>Admin#adjustMySalary</code> method works for both negative and positive percent values.</li>
                    <li><code>Academic#adjustMySalary</code> method works for percent values 1..100 only.</li>
                  </ul>
                  <p>In the above scenario,</p>
                  <ul>
                    <li><code>Admin</code> class follows LSP because it fulfills <code>Payroll</code>’s expectation of <code>Staff</code> objects (i.e. it works for all positive values). Substituting <code>Admin</code> objects for Staff objects will not break
                      the <code>Payroll</code> class functionality.</li>
                    <li><code>Academic</code> class violates LSP because it will not work for percent values over 100 as expected by the <code>Payroll</code> class. Substituting <code>Academic</code> objects for <code>Staff</code> objects can potentially
                      break the <code>Payroll</code> class functionality.</li>
                  </ul>
                </tip-box>
              </div>
              <div>
                <div>
                  <panel header=":muscle: Exercises" expandable="">
                    <div>
                      <panel header=":lock::key: True or False?">
                        <question>
                          <p>If a subclass imposes more restrictive conditions than its parent class, it violates Liskov substitution principle.</p>
                          <ul class="task-list">
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> a. True</li>
                            <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. False</li>
                          </ul>
                          <div slot="answer">
                            <ul class="task-list">
                              <li class="task-list-item"><input class="task-list-item-checkbox" checked type="checkbox"> a. True</li>
                              <li class="task-list-item"><input class="task-list-item-checkbox" type="checkbox"> b. False</li>
                            </ul>
                            <p>Explanation: If the subclass is more restrictive than the parent class, a piece of code that worked with the parent class may not work with the child class. Hence, the substitutability does not exist and Liskov substitution
                              principle is violated.</p>
                          </div>
                        </question>
                      </panel>
                    </div>
                  </panel>
                </div>
                <div></div>
              </div>
            </div>
          </div>
          <panel header=":dart: Evidence" expanded="">
            <p>...</p>
          </panel>
        </panel>
      </panel>
    </div>
  </div>
</panel>

<panel header=":clipboard: Todo" expandable="" ctrl-lvl="1" no-close="">
  <div>
    <panel header="Admin info to read" expandable="" expanded="">
      <p>
        <panel type="danger" src="/website\admin\project-v11._include_.html" name="%%Admin &raquo;%% Project: v1.1 :star:" header="%%Admin &raquo;%% Project: v1.1 :star:" isOpen="false" no-close="true" no-switch="true"></panel>
      </p>
      <p>
        <panel type="success" src="/website\admin\appendixC-faq._include_.html#admin-faq-fromScratch" name="%%Admin &raquo;%% FAQ: Why aren't we allowed to build a new product from scratch? :star::star::star::star:" fragment="admin-faq-fromScratch" header="%%Admin &raquo;%% FAQ: Why aren't we allowed to build a new product from scratch? :star::star::star::star:"
          isOpen="false" no-close="true" no-switch="true"></panel>
        <panel type="success" src="/website\admin\appendixC-faq._include_.html#admin-faq-manySubmissions" name="%%Admin &raquo;%% FAQ: Why so many submissions? :star::star::star::star:" fragment="admin-faq-manySubmissions" header="%%Admin &raquo;%% FAQ: Why so many submissions? :star::star::star::star:"
          isOpen="false" no-close="true" no-switch="true"></panel>
        <panel type="success" src="/website\admin\appendixC-faq._include_.html#admin-faq-cs2101Differences" name="%%Admin &raquo;%% FAQ: Why submission requirements differ between CS2103T and CS2101? :star::star::star::star:" fragment="admin-faq-cs2101Differences"
          header="%%Admin &raquo;%% FAQ: Why submission requirements differ between CS2103T and CS2101? :star::star::star::star:" isOpen="false" no-close="true" no-switch="true"></panel>
      </p>
    </panel>
  </div>
</panel>

<panel header=":raising_hand: Tutorial 8" expandable="" ctrl-lvl="1" no-close=""></panel>

<panel header=":mega: Lecture 8" expandable="" ctrl-lvl="1" no-close=""></panel>